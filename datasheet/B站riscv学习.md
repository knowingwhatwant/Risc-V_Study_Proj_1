主线任务

一、基础ADD指令

文件写完了，编译通过了，但是仿真测试的时候没有结果。

表现在display函数没有打印出内容，也没看见任何的波形。

二、解决过程

（1）排查代码问题，排查了一遍并没有发现问题

使用VS Code中diff插件工具将自己的代码与b站up上传代码进行对比

（2）排查仿真中rom是否读入了指令

读入了

（3）发现clk的状态一直是x，并且tb中的display函数都没有打印（不管寄存器有无结果应该都会打印）

发现是tb文件中clk驱动不对的原因，改了之后正确了，可以正常仿真了。

但是当我在命令行窗口输入

 

二、分支跳转指令

2.1 介绍：

2.1.1 指令介绍

手册中有说每条指令对应的功能。

官方有对应的测试指令，最基础的add的测试需要实现add和一些相关的跳转指令才能运行（lui，apuic，jal，bne），需要先实现对应的指令。

2.1.2 流水线冲刷机制

<img src="D:\Users\GXZ\Pictures\md\B站riscv学习\image-20231022140639816.png" alt="image-20231022140639816" style="zoom: 30%;" />

> 正常来说`bne`执行后应该跳转指令10，但是此时`指令2`已经修改了寄存器的值，所以需要额外引入`ctrl`模块对流水线进行操作

2.1.3 代码实现

新增`ctrl`模块
在其余模块添加端口



![image-20231022160316482](D:\Users\GXZ\Pictures\md\B站riscv学习\image-20231022160316482.png)

今天看了这个才知道原来`case`下面的条件是可以用逗号隔开，写多个的。





补全指令：

算数R型、I型，B型判断，J型跳转指令

有符号、无符号区分。

稍麻烦一点就是移位



Load和Store指令需要一个额外的模块（RAM）才能进行操作。







问题：

上次例会上谢老师说直接上板子进行测试，











